<UserControl x:Class="Effizienz.Views.ViewProjektÜbersicht"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 
			 xmlns:converter="clr-namespace:Effizienz.Converters"
			 xmlns:classes="clr-namespace:Effizienz.Classes">

	<UserControl.Resources>
		<converter:ConverterAufgabe x:Key="AufgabenConverter"/>
		<converter:ConverterColorToSCB x:Key="ColorConverter"/>
	</UserControl.Resources>

	<Border Background="{DynamicResource Back_1}">

	<!-- TabControl mit den Kategorien als Tab -->
	<TabControl ItemsSource="{Binding Kategorien, UpdateSourceTrigger=PropertyChanged}" Grid.Row="0"
				MinWidth="700"
				x:Name="ControlRoot"
				BorderBrush="{x:Null}" 
				Background="Transparent">

		<TabControl.Resources>
			<!-- Style für Tabs -->
			<Style TargetType="{x:Type TabItem}">
				<Setter Property="Template">
					<Setter.Value>
						<ControlTemplate TargetType="{x:Type TabItem}">
							<!-- Setzt ein Grid als HintergrundPanel -->
							<Grid Name="Panel" Background="Transparent">
								<ContentPresenter x:Name="ContentSite"
												  VerticalAlignment="Center"
												  HorizontalAlignment="Center"
												  ContentSource="Header"
												  Margin="10,2"/>
							</Grid>
							<!-- Stylt die verschiedene Anzeigezustände -->
							<ControlTemplate.Triggers>
								<Trigger Property="IsSelected" Value="True">
									<Setter TargetName="Panel" Property="Background" Value="LightSkyBlue" />
								</Trigger>
								<Trigger Property="IsSelected" Value="False">
									<Setter TargetName="Panel" Property="Background" Value="Transparent" />
								</Trigger>
							</ControlTemplate.Triggers>
						</ControlTemplate>
					</Setter.Value>
				</Setter>
			</Style>
		</TabControl.Resources>

		<!-- Template für Tab -->
		<TabControl.ItemTemplate>
			<DataTemplate>
				<!-- Setzt ein Kreis und den Titel als TextBlock -->
				<StackPanel Orientation="Horizontal" Background="Transparent">
					<Ellipse x:Name="ColorEllipse" Fill="{Binding Farbe, Converter={StaticResource ColorConverter}}" 
							 Margin="2" Width="10" Height="10" 
							 HorizontalAlignment="Center" VerticalAlignment="Center"/>
					<TextBlock Text="{Binding Titel}"/>
				</StackPanel>
			</DataTemplate>
		</TabControl.ItemTemplate>

		<TabControl.ContentTemplate>
			<DataTemplate>
				<TreeView ItemsSource="{Binding Path=Projekte}" Grid.Column="0" Background="Transparent">

					<TreeView.Resources>
						<ResourceDictionary Source="/Effizienz;component/Dictionaries/DictionaryTreeView.xaml"/>
					</TreeView.Resources>

					<TreeView.ItemTemplate>
						<HierarchicalDataTemplate DataType="{x:Type classes:Projekt}" ItemsSource="{Binding Aufgaben}">

							<!-- Template für das Übergeordnete Element (Projekt) -->
							<TextBlock Text="{Binding Titel}"/>

							<HierarchicalDataTemplate.ItemTemplate>
								<DataTemplate DataType="{x:Type classes:Aufgabe}">

									<!-- Template für das Untergeordnete Element (Aufgabe) -->
									<TextBlock Text="{Binding Titel}"/>

								</DataTemplate>
							</HierarchicalDataTemplate.ItemTemplate>
						</HierarchicalDataTemplate>
					</TreeView.ItemTemplate>
				</TreeView>
			</DataTemplate>
		</TabControl.ContentTemplate>

	</TabControl>

	</Border>

</UserControl>
